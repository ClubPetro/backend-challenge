<p align="center">
  <a href="http://nestjs.com/" target="blank"><img src="https://nestjs.com/img/logo_text.svg" width="320" alt="Nest Logo" /></a>
</p>

[circleci-image]: https://img.shields.io/circleci/build/github/nestjs/nest/master?token=abc123def456
[circleci-url]: https://circleci.com/gh/nestjs/nest

  <p align="center">A progressive <a href="http://nodejs.org" target="_blank">Node.js</a> framework for building efficient and scalable server-side applications.</p>
    <p align="center">
<a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/v/@nestjs/core.svg" alt="NPM Version" /></a>
<a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/l/@nestjs/core.svg" alt="Package License" /></a>
<a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/dm/@nestjs/common.svg" alt="NPM Downloads" /></a>
<a href="https://circleci.com/gh/nestjs/nest" target="_blank"><img src="https://img.shields.io/circleci/build/github/nestjs/nest/master" alt="CircleCI" /></a>
<a href="https://coveralls.io/github/nestjs/nest?branch=master" target="_blank"><img src="https://coveralls.io/repos/github/nestjs/nest/badge.svg?branch=master#9" alt="Coverage" /></a>
<a href="https://discord.gg/G7Qnnhy" target="_blank"><img src="https://img.shields.io/badge/discord-online-brightgreen.svg" alt="Discord"/></a>
<a href="https://opencollective.com/nest#backer" target="_blank"><img src="https://opencollective.com/nest/backers/badge.svg" alt="Backers on Open Collective" /></a>
<a href="https://opencollective.com/nest#sponsor" target="_blank"><img src="https://opencollective.com/nest/sponsors/badge.svg" alt="Sponsors on Open Collective" /></a>
  <a href="https://paypal.me/kamilmysliwiec" target="_blank"><img src="https://img.shields.io/badge/Donate-PayPal-ff3f59.svg"/></a>
    <a href="https://opencollective.com/nest#sponsor"  target="_blank"><img src="https://img.shields.io/badge/Support%20us-Open%20Collective-41B883.svg" alt="Support us"></a>
  <a href="https://twitter.com/nestframework" target="_blank"><img src="https://img.shields.io/twitter/follow/nestframework.svg?style=social&label=Follow"></a>
</p>
  <!--[![Backers on Open Collective](https://opencollective.com/nest/backers/badge.svg)](https://opencollective.com/nest#backer)
  [![Sponsors on Open Collective](https://opencollective.com/nest/sponsors/badge.svg)](https://opencollective.com/nest#sponsor)-->

## Description

Backend Challenge for ClubPetro.

## Stack
```bash
   Node.JS - Is a JavaScript runtime built on V8 engine (https://nodejs.org/en/)
   Typescript - Is a typed superset of JavaScript that compiles to plain JavaScript (https://www.typescriptlang.org/)
   NestJS - A progressive architectural framework for node.js (https://nestjs.com/)
   Express - A HTTP Provider to Node.JS (https://expressjs.com/pt-br/)
   Typeorm - ORM for full suport to Typescript (https://typeorm.io/)
   Swagger - API Development for documentation (https://swagger.io/)
              - you can access the challenge documentation generated by swagger using the following URL:
                localhost:3000/swagger
```

## Prerequisites

```bash
- node lastest LTS version (12.x) of node installed on your machine
- postgres server installed on your machine - https://www.postgresql.org/
   - create a database called clubpetro-dev (recommended)
   - create a database called clubpetro-test (recommended)
   - you can also run the dockerfile on the folder docker in the root of this project to create a docker container with a postgres image.
   - PS: fill up the .env file with de DB information.
```

## Installing dependencies
```bash
- fill up the .env file as you like, an .env-example can be found in the root of this project.
- put the content of this file at a file called .env at root of project
- run the following cmd:
  npm i
- check if after executed the cmd above, generated a folder called node_module at root of project
```

## Project Organization (architecture/structure)
```bash
├── .env               <- env file.
├── node_modules       <- packages of node/third part, only at development time (npm run install create this folder).
├── dist               <- the compiled javascript, only at development time (nest compiles typescript to javasctipt).
├── test               <- has the entity based folters with the e2e tests.
├── src                <- Source code for use in this project.
│   ├── migrations O(n)   <- folder containing the migrations in creation order generated by TypeORM or manual written (database structure versioning)
│   │   ├── [migration-name]  <- the raw (string) query or code using the query builder.
│   ├── modules O(n)      <- folder containing the modules, based on entity.
│   │   ├── [module-name]     <- modules structured on hexagonal architecture and feature/entity folder based
│   │   │   ├── [module-name].controller.ts  <- controller of the module (might not exists depending of the module).
│   │   │   ├── [module-name].entity.ts      <- the class that represents the entity/table of the module (might not exists depending of the module).
│   │   │   ├── [module-name].module.ts      <- the module root, where is setup what is export from module or import into module (required in all modules).
│   │   │   ├── [module-name].service.ts     <- the layer that is responsbile for the business rules and logic, it orchestrate and uses the repositories.
│   │   │   ├── [module-name].repository.ts  <- the layer that is responsbile for the data access, it have direct access to the database operations, this file will exists only if is needed a custom repository (TyperORM already have a repository base which is extended of the respective entity on the service layer).
│   │   ├── index.ts          <- read all modules (folders) and get all roots of the modules (loader).
│   ├── shared            <- folder with the abstractions that can used on different modules of the project (DRY concept).
│   │   ├── config O(n)       <- has named-infra based folders which have config files.
│   │   ├── controllers O(n)  <- has controllers with some kind of abstractation.
│   │   ├── exceptions O(n)   <- has entity based folders which have custom exceptions.
│   │   ├── filters O(n)      <- has the filters (files) that are applied universal by type on the app (filter is a abstraction to handle errors and send a friendly/custom response to the client).
│   │   ├── guards O(n)       <- has the guards (files) that are applied on entire controllers or specific endpoints, guard is a middleware abstraction that is executed before the handler (controller layer) for authorization/security/rules and apply levels of use such as roles.
│   │   ├── interceptors O(n) <- has the interceptors (files) that are applied on controllers, interceptor is a middleware abstraction that is executed between the request/response and the handler/client and can change the behavior of the request or response.
│   │   ├── middlewares O(n)  <- has the regular middlewares (files) that can have code that can be executed between request and a handler, in this case is basically used for authentication, or any else kind of middleware that does not match with the another abstractions.
│   │   ├── modules O(n)      <- has loader modules (files), a root file that imports/exports a bundle of components/abstractions that are used in common in some part.
│   │   ├── services O(n)     <- has services (files), that can be used in different parts/modules.
│   ├── main.ts               <- bootstrap (init) the server
│   ├── ormconfig.ts          <- setup the database configuration (ORM: TypeORM)
│   ├── app.module.ts         <- load all sub-modules (each child-folder of src is a module)
```

## Installation

```bash
$ npm install
```

## Running the app

```bash
# development
$ npm run start

# watch mode
$ npm run start:dev

# production mode
$ npm run start:prod
```

## Test

```bash
# e2e tests
$ npm run test:e2e

# test coverage
$ npm run test:cov
```

## Support

Nest is an MIT-licensed open source project. It can grow thanks to the sponsors and support by the amazing backers. If you'd like to join them, please [read more here](https://docs.nestjs.com/support).

## Stay in touch

- Author - [Kamil Myśliwiec](https://kamilmysliwiec.com)
- Website - [https://nestjs.com](https://nestjs.com/)
- Twitter - [@nestframework](https://twitter.com/nestframework)

## License

Nest is [MIT licensed](LICENSE).
